<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="baidu-site-verification" content="w9Akh6dPe4" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<!--[if lte IE 8]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]-->

<title>高阶函数---swift中的Filter 和 Reduce | 逆行云的技术博客</title>
<meta name="author" content="逆行云">




<link rel="shortcut icon" href="" />

<link rel="stylesheet" type="text/css" href="/assets/css/style.css">

<link href="/pages/rss.xml" rel="alternate" title="逆行云的技术博客" type="application/atom+xml">



  </head>
  <body>
        <aside id="sidebar">
  <nav id="tags">
    <a href="/index.html" id="avatar" style="background-image:url(https://github.com/YQqiang/YQqiang.github.io/blob/master/_site/assets/images/mine.JPG?raw=true|width=320|height=480)"></a>

    <ul id="tags__ul">
      <li id="pl__all" class="tags__li tags-btn active">所有文章</li>
       
        <li id="开发笔记" class="tags__li tags-btn">开发笔记</li>
       
        <li id="函数式Swift" class="tags__li tags-btn">函数式Swift</li>
       
        <li id="项目维护" class="tags__li tags-btn">项目维护</li>
       
        <li id="开源项目" class="tags__li tags-btn">开源项目</li>
      
    </ul>

    <div id="tags__bottom">
      <a href="https://github.com/YQqiang" id="icon-github" class="tags-btn fontello" target="_blank"></a>
      <a href="/pages/rss.xml" id="icon-feed" class="tags-btn fontello" target="_blank"></a>
      <a href="mailto:yuqiang.coder@gmail.com" id="icon-email" class="tags-btn fontello"></a>
    </div>
  </nav> <!-- end #tags -->

  <div id="posts-list">
    <form action="" id="search-form">
      <a href="/index.html" id="mobile-avatar" style="background-image:url(https://github.com/YQqiang/YQqiang.github.io/blob/master/_site/assets/images/mine.JPG?raw=true|width=320|height=480)"></a>
      <!-- NOTE: input field is disabled by default -->
      <input id="search-input" type="text" placeholder="Search..." >
    </form>

    <nav id="pl__container">
    
      <a class="开发笔记 pl__all" href="/2017/08/30/@strongify(self)-%E5%92%8C-@weakify(self)-%E5%AE%8F.html"><span class="pl__circle"></span><span class="pl__title">@strongify(self) 和 @weakify(self) 宏</span><span class="pl__date">17/08/30</span></a>
    
      <a class="开发笔记 pl__all" href="/2017/08/17/UserInfo=-NSDebugDescription=Garbage-at-end.-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html"><span class="pl__circle"></span><span class="pl__title">UserInfo={NSDebugDescription=Garbage at end.}解决方案</span><span class="pl__date">17/08/17</span></a>
    
      <a class="开发笔记 pl__all" href="/2017/07/29/%E4%BD%BF%E7%94%A8RunTime%E6%B8%85%E7%A9%BA%E5%8D%95%E4%BE%8B%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E5%80%BC.html"><span class="pl__circle"></span><span class="pl__title">使用RunTime清空单例对象属性值</span><span class="pl__date">17/07/29</span></a>
    
      <a class="开发笔记 pl__all" href="/2017/07/12/UIBezierPath-+-CAShapeLayer-%E5%AE%9E%E6%88%98%E5%BA%94%E7%94%A8.html"><span class="pl__circle"></span><span class="pl__title">UIBezierPath + CAShapeLayer 实战应用</span><span class="pl__date">17/07/12</span></a>
    
      <a class="项目维护 pl__all" href="/2017/06/20/%E9%A1%B9%E7%9B%AE%E7%BB%B4%E6%8A%A4-%E6%A8%A1%E7%B3%8A%E6%90%9C%E7%B4%A2%E6%8E%A7%E4%BB%B6%E5%B0%81%E8%A3%85.html"><span class="pl__circle"></span><span class="pl__title">项目维护<<模糊搜索控件封装>></span><span class="pl__date">17/06/20</span></a>
    
      <a class="项目维护 pl__all" href="/2017/06/13/%E9%A1%B9%E7%9B%AE%E7%BB%B4%E6%8A%A4-%E5%9C%B0%E5%9B%BE%E7%9B%B8%E5%85%B3%E6%80%BB%E7%BB%93.html"><span class="pl__circle"></span><span class="pl__title">项目维护<<地图相关总结>></span><span class="pl__date">17/06/13</span></a>
    
      <a class="项目维护 pl__all" href="/2017/06/03/%E9%A1%B9%E7%9B%AE%E7%BB%B4%E6%8A%A4-%E5%AF%BC%E8%88%AA%E6%A0%8F%E6%A0%87%E9%A2%98%E6%8D%A2%E8%A1%8C%E6%98%BE%E7%A4%BA.html"><span class="pl__circle"></span><span class="pl__title">项目维护<<导航栏标题换行显示>></span><span class="pl__date">17/06/03</span></a>
    
      <a class="开源项目 pl__all" href="/2017/04/28/iOS-YQAlert-%E5%BC%B9%E5%87%BA%E6%A1%86-%E4%B8%AA%E4%BA%BA%E5%BA%93.html"><span class="pl__circle"></span><span class="pl__title">iOS YQAlert 弹出框 -- 个人库</span><span class="pl__date">17/04/28</span></a>
    
      <a class="开源项目 pl__all" href="/2017/04/19/Nunchakus-%E4%B8%AA%E4%BA%BAAPP.html"><span class="pl__circle"></span><span class="pl__title">Nunchakus -- 个人APP</span><span class="pl__date">17/04/19</span></a>
    
      <a class="开发笔记 pl__all" href="/2017/04/07/git-%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E5%B0%8F%E7%BB%93.html"><span class="pl__circle"></span><span class="pl__title">git 日常使用小结</span><span class="pl__date">17/04/07</span></a>
    
      <a class="开发笔记 pl__all" href="/2017/03/20/BgImgTextView.html"><span class="pl__circle"></span><span class="pl__title">BgImgTextView</span><span class="pl__date">17/03/20</span></a>
    
      <a class="开发笔记 pl__all" href="/2017/03/07/Swift-%E6%8A%80%E8%83%BD%E5%B0%8F%E7%BB%93(%E4%BA%8C).html"><span class="pl__circle"></span><span class="pl__title">Swift-技能小结(二)</span><span class="pl__date">17/03/07</span></a>
    
      <a class="项目维护 pl__all" href="/2017/02/25/%E4%BD%BF%E7%94%A8NSUserDefaults%E6%8C%81%E4%B9%85%E5%8C%96%E7%99%BB%E5%BD%95%E6%8E%A5%E5%8F%A3%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A1%AB%E5%9D%91%E7%AC%94%E8%AE%B0.html"><span class="pl__circle"></span><span class="pl__title">使用NSUserDefaults持久化登录接口数据的填坑笔记</span><span class="pl__date">17/02/25</span></a>
    
      <a class="函数式Swift pl__all" href="/2017/02/23/RxSwift-+-Moya-+-ObjectMapper-+-MVVM-%E7%9A%84%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82.html"><span class="pl__circle"></span><span class="pl__title">RxSwift + Moya + ObjectMapper + MVVM 的网络请求</span><span class="pl__date">17/02/23</span></a>
    
      <a class="开发笔记 pl__all" href="/2017/02/22/Swift-%E6%8A%80%E8%83%BD%E5%B0%8F%E7%BB%93(%E4%B8%80).html"><span class="pl__circle"></span><span class="pl__title">Swift-技能小结(一)</span><span class="pl__date">17/02/22</span></a>
    
      <a class="函数式Swift pl__all" href="/2017/02/14/%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0-swift%E4%B8%AD%E7%9A%84%E6%B3%9B%E5%9E%8B%E4%BB%8B%E7%BB%8D(%E4%B8%80%E6%AD%A5%E6%AD%A5%E5%AE%9E%E7%8E%B0Map%E5%87%BD%E6%95%B0).html"><span class="pl__circle"></span><span class="pl__title">高阶函数---swift中的泛型介绍(一步步实现Map函数)</span><span class="pl__date">17/02/14</span></a>
    
      <a class="函数式Swift pl__all" href="/2017/02/14/%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0-swift%E4%B8%AD%E7%9A%84Filter-%E5%92%8C-Reduce.html"><span class="pl__circle"></span><span class="pl__title">高阶函数---swift中的Filter 和 Reduce</span><span class="pl__date">17/02/14</span></a>
    
      <a class="开发笔记 pl__all" href="/2017/02/13/iOS-%E5%BD%93%E7%BC%96%E8%BE%91%E5%AF%86%E7%A0%81%E8%BE%93%E5%85%A5%E6%A1%86%E6%97%B6,-%E4%BC%9A%E8%87%AA%E5%8A%A8%E6%B8%85%E7%A9%BA%E6%96%87%E6%9C%AC%E6%A1%86%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html"><span class="pl__circle"></span><span class="pl__title">iOS---当编辑密码输入框时, 会自动清空文本框问题解决方案</span><span class="pl__date">17/02/13</span></a>
    
      <a class="开发笔记 pl__all" href="/2017/02/09/REMOTE-HOST-IDENTIFICATION-HAS-CHANGED.html"><span class="pl__circle"></span><span class="pl__title">WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</span><span class="pl__date">17/02/09</span></a>
    
      <a class="项目维护 pl__all" href="/2017/01/22/UISearchBar-%E9%97%AA%E7%8E%B0%E8%83%8C%E6%99%AF%E8%89%B2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html"><span class="pl__circle"></span><span class="pl__title">UISearchBar 闪现背景色解决方案</span><span class="pl__date">17/01/22</span></a>
    
      <a class="开发笔记 pl__all" href="/2017/01/19/iOS%E5%90%8C%E6%AD%A5%E8%B0%83%E7%94%A8%E5%AF%B9%E8%AF%9D%E6%A1%86-RunLoop%E7%9A%84%E4%BD%BF%E7%94%A8.html"><span class="pl__circle"></span><span class="pl__title">iOS同步调用对话框 RunLoop的使用</span><span class="pl__date">17/01/19</span></a>
    
      <a class="函数式Swift pl__all" href="/2017/01/10/iOS-Swift%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-Core-Image-%E5%B0%81%E8%A3%85.html"><span class="pl__circle"></span><span class="pl__title">iOS-Swift函数式编程 Core Image 封装</span><span class="pl__date">17/01/10</span></a>
    
      <a class="开发笔记 pl__all" href="/2017/01/07/iOS-%E6%97%B6%E5%8C%BA%E8%BD%AC%E6%8D%A2(Objective-C)-NSTimeZone.html"><span class="pl__circle"></span><span class="pl__title">iOS-时区转换(Objective-C) NSTimeZone</span><span class="pl__date">17/01/07</span></a>
    
      <a class="函数式Swift pl__all" href="/2016/12/28/RxSwift-%E6%88%90%E9%95%BF%E4%B9%8B%E8%B7%AF-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%92%8C%E8%AF%AD%E6%B3%95.html"><span class="pl__circle"></span><span class="pl__title">RxSwift 成长之路---基本概念和语法</span><span class="pl__date">16/12/28</span></a>
    
      <a class="开发笔记 pl__all" href="/2016/12/24/iOS-UILabel%E6%89%A9%E5%B1%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E5%AD%97%E5%A2%9E%E9%95%BF-%E5%87%8F%E5%B0%8F%E5%8A%A8%E7%94%BB.html"><span class="pl__circle"></span><span class="pl__title">iOS-UILabel扩展实现数字增长/减小动画</span><span class="pl__date">16/12/24</span></a>
    
      <a class="开发笔记 pl__all" href="/2016/12/23/iOS-%E6%97%A5%E6%9C%9F%E9%80%89%E6%8B%A9%E6%8E%A7%E4%BB%B6(%E5%8F%AF%E5%8D%95%E7%8B%AC%E9%80%89%E5%B9%B4-%E5%B9%B4%E6%9C%88-%E5%B9%B4%E6%9C%88%E6%97%A5).html"><span class="pl__circle"></span><span class="pl__title">iOS-日期选择控件(可单独选年/年月/年月日)</span><span class="pl__date">16/12/23</span></a>
    
    </nav>
  </div> <!-- end #posts-list -->
</aside> <!-- end #sidebar -->
    <div id="post">
      <div id="pjax">
        <article id="post__content">
    <h1 id="post__title" data-identifier="20170214">高阶函数---swift中的Filter 和 Reduce</h1>
    <p><img src="http://upload-images.jianshu.io/upload_images/3538284-0bc34a563338d07e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<h1 id="说明">说明</h1>
<blockquote>
  <p>本文内容均出自<a href="https://store.objccn.io/products/functional-swift/">函数式 Swift</a>一书, 此处整理仅仅是为了自己日后方便查看, 需要深入研究的话, 可以点进去购买, 支持<a href="https://store.objccn.io/products/functional-swift/">原作者</a>
本书由 <a href="http://weibo.com/onevcat?is_hot=1">王巍–新浪微博</a>大神翻译
<a href="https://onevcat.com/#blog">OneV’s Den 喵神博客</a></p>
</blockquote>

<hr />

<blockquote>
  <p>上一篇写到了<a href="http://www.jianshu.com/p/b7d2adcedb14">高阶函数—Swift中的泛型介绍(一步步实现map函数)</a>
<code class="highlighter-rouge">map函数</code>并不是Swift标准数组库中唯一一个使用泛型的函数. 趁着今天有时间, 把<code class="highlighter-rouge">Filter</code> 和 <code class="highlighter-rouge">Reduce</code>也整理一下, 方便日后查阅.</p>
</blockquote>

<h1 id="filter">Filter</h1>
<hr />
<blockquote>
  <p>假设我们有一个由字符串组成的数组, 代表文件夹的内容:</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>let exampleFiles = ["README.md", "HelloWorld.swift", "FlappyBird.swift"]
</code></pre>
</div>

<blockquote>
  <p>现在如果我们想要一个包含所有<code class="highlighter-rouge">.swift</code>文件的数组, 可以很容易通过简单的循环得到:</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>func getSwiftFiles(_ files: [String]) -&gt; [String] {
        var result: [String] = []
        for file in files {
            if file.hasSuffix(".swift") {
                result.append(file)
            }
        }
        return result
    }
</code></pre>
</div>

<blockquote>
  <p>现在可以使用这个函数来取得<code class="highlighter-rouge">exampleFiles</code>数组中的<code class="highlighter-rouge">Swift</code>文件</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>print("\(getSwiftFiles(exampleFiles))")

</code></pre>
</div>

<p><img src="http://upload-images.jianshu.io/upload_images/3538284-ad28945db49f5cbb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="获取数组中的Swift文件" /></p>

<blockquote>
  <p>当然, 我们可以将<code class="highlighter-rouge">getSwiftFiles</code>函数一般化. 比如, 相比于使用硬编码(hardcoding)的方式筛选扩展名为<code class="highlighter-rouge">.swift</code>的文件, 传递一个附加的<code class="highlighter-rouge">String</code>参数进行比对会是更好的方法. 我们接下来可以使用同样的函数去比对<code class="highlighter-rouge">.swift</code>或<code class="highlighter-rouge">.md</code>文件. 但是假如我们想查找没有扩展名的所有文件, 或者是名字以字符串<code class="highlighter-rouge">Hello</code>开头的文件, 那怎么办呢?</p>
</blockquote>

<hr />
<blockquote>
  <p>为了进行一个这样的查找, 我们可以定义一个名为<code class="highlighter-rouge">filter</code>的通用型函数. 就像之前看到的<a href="http://www.jianshu.com/p/b7d2adcedb14">map</a>那样, <code class="highlighter-rouge">filter</code>函数接受一个<strong><em>函数</em></strong>作为参数. <code class="highlighter-rouge">filter</code>函数的类型是<code class="highlighter-rouge">Element -&gt; Bool</code> ——对于数组中的所有元素, 此函数都会判定它是否应该被包含在结果中:</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>extension Array {
    func filter(includeElement: (Element) -&gt; Bool) -&gt; [Element] {
        var result: [Element] = []
        for x in self where includeElement(x) {
            result.append(x)
        }
        return result
    }
}
</code></pre>
</div>

<blockquote>
  <p>根据<code class="highlighter-rouge">filter</code> 能很容易地定义<code class="highlighter-rouge">getSwiftFiles</code>:</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>func getSwiftFiles(_ files: [String]) -&gt; [String] {
        return files.filter(includeElement: { (file) -&gt; Bool in
            file.hasSuffix(".swift")
        })
    }
</code></pre>
</div>

<blockquote>
  <p>就像<code class="highlighter-rouge">map</code>一样, <code class="highlighter-rouge">Swift</code>标准库中的数组类型已经有定义好的<code class="highlighter-rouge">filter函数</code>了. 所以除非是作为练习, 否则并没有必要重写它.</p>
</blockquote>

<h1 id="reduce">Reduce</h1>
<hr />
<blockquote>
  <p>在定义一个泛型函数来体现一个更常见的模式之前, 我们会先考虑一些相对简单的函数.</p>
</blockquote>

<blockquote>
  <p>定义一个计算数组中所有整型值之和的函数非常简单:</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>func sum(_ xs: [Int]) -&gt; Int {
        var result: Int = 0
        for x in xs {
            result += x
        }
        return result
    }
</code></pre>
</div>

<blockquote>
  <p>我们可以向下面这样使用<code class="highlighter-rouge">sum函数</code></p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>print(sum([1, 2, 3, 4]))
</code></pre>
</div>

<p><img src="http://upload-images.jianshu.io/upload_images/3538284-bcbb4dd871eafc4a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="sum结果" /></p>

<blockquote>
  <p>我们也可以使用类似<code class="highlighter-rouge">sum</code>中的<code class="highlighter-rouge">for循环</code>来定义一个 <code class="highlighter-rouge">product函数</code>, 用于计算所有数组项相乘之积:</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>func product(_ xs: [Int]) -&gt; Int {
        var result: Int = 1
        for x in xs {
            result = x * result
        }
        return result
    }
</code></pre>
</div>

<blockquote>
  <p>同样地, 我们可能想要连接数组中的所有字符串:</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>func concatenate(_ xs: [String]) -&gt; String {
        var result: String = ""
        for x in xs {
            result += x
        }
        return result
    }
</code></pre>
</div>

<blockquote>
  <p>或者说, 我们可以选择连接数组中的所有字符串, 并插入一个单独的首行, 以及在每一项后面追加一个换行符:</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>func prettyPrintArray(_ xs: [String]) -&gt; String {
        var result: String = ""
        for x in xs {
            result = " " + result + x + "\n"
        }
        return result
    }
</code></pre>
</div>

<blockquote>
  <p>这些函数有什么共同特点呢? 他们都将变量<code class="highlighter-rouge">result</code>初始化为某个值. 随后对输入数组  <code class="highlighter-rouge">xs</code> 的每一项进行遍历, 最后以某种方式更新结果. 为了定义一个可以体现所需类型的泛型函数, 我们需要对两份信息进行抽象: 赋给 <code class="highlighter-rouge">result</code>变量的初始值, 和用于在每一次循环中更新<code class="highlighter-rouge">result</code>的<strong><em>函数</em></strong></p>
</blockquote>

<blockquote>
  <p>考虑到这一点, 我们得出了能够匹配此模式的<code class="highlighter-rouge">reduce函数</code>定义, 如下所示:</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>extension Array {
    func reduce&lt;T&gt;(initial: T, combine: (T, Element) -&gt; T) -&gt; T {
        var result = initial
        for x in self {
            result = combine(result, x)
        }
        return result
    }
}
</code></pre>
</div>

<blockquote>
  <p>这个函数的泛型类型体现在两个方面: 对于任意的<code class="highlighter-rouge">[Element]</code>类型的<strong><em>输入数组</em></strong>来说, 它会计算一个类型为<code class="highlighter-rouge">T</code>的返回值. 这么做的前提是, 首先需要一个<code class="highlighter-rouge">T</code>类型的初始值(赋值给<code class="highlighter-rouge">result</code>变量), 以及一个用于更新<code class="highlighter-rouge">for循环</code>中变量值的函数<code class="highlighter-rouge">combine:(T, Element) -&gt; T</code>. 在一些想<code class="highlighter-rouge">OCaml</code> 和 <code class="highlighter-rouge">Haskell</code>一样的函数式语言中, <code class="highlighter-rouge">reduce</code>函数被称为<code class="highlighter-rouge">fold</code> 或 <code class="highlighter-rouge">fold_left</code></p>
</blockquote>

<blockquote>
  <p>我们可以使用 <code class="highlighter-rouge">reduce</code>来定义以上函数. 下面是几个例子:</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>func sumUsingReduce(_ xs: [Int]) -&gt; Int {
        return xs.reduce(0) { (result, x) -&gt; Int in
            return result + x
        }
    }
</code></pre>
</div>

<blockquote>
  <p>除了写一个闭包, 我们也可以将运算符作为最后一个参数. 这使得代码更短, 如下面两个函数所示:</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>func productUsingReduce(_ xs: [Int]) -&gt; Int {
        return xs.reduce(initial: 1, combine: *)
    }
    
    func concatUsingReduce(_ xs: [String]) -&gt; String {
        return xs.reduce(initial: "", combine: +)
    }
</code></pre>
</div>

<blockquote>
  <p>需要再一次说明, 我们自定义<code class="highlighter-rouge">reduce</code>仅仅只是为了练习. <code class="highlighter-rouge">Swift</code>的标准库已经为数组提供了<code class="highlighter-rouge">reduce函数</code></p>
</blockquote>

<hr />

<blockquote>
  <p>我们可以使用<code class="highlighter-rouge">reduce</code> 来定义新的泛型函数. 例如, 假设有一个数组, 它的每一项都是数组, 而我们想将他展开为一个单一数组. 可以使用<code class="highlighter-rouge">for循环</code>编写一个函数:</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>func flatten&lt;T&gt;(_ xss: [[T]]) -&gt; [T] {
        var result: [T] = []
        for xs in xss {
            result += xs
        }
        return result
    }
</code></pre>
</div>

<blockquote>
  <p>然而, 若使用<code class="highlighter-rouge">reduce</code>则可以想下面这样编写这个函数:</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>func flattenUsingReduce&lt;T&gt;(_ xss: [[T]]) -&gt; [T] {
        return xss.reduce(initial: [], combine: { (result, xs) -&gt; [T] in
            return result + xs
        })
    }
</code></pre>
</div>

<blockquote>
  <p>实际上, 我们甚至可以使用<code class="highlighter-rouge">reduce</code>重新定义<code class="highlighter-rouge">map</code> 和 <code class="highlighter-rouge">filter</code>:</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>func mapUsingReduce&lt;T&gt;(_ transform: (Element) -&gt; T) -&gt; [T] {
        return reduce(initial: [], combine: { (result, x) -&gt; [T] in
            return result + [transform(x)]
        })
    }
    
    func flterUsingReduce(_ includeElement:(Element) -&gt; Bool) -&gt; [Element] {
        return reduce(initial: [], combine: { (result, x) -&gt; [Element] in
            return includeElement(x) ? result + [x] : result
        })
    }
</code></pre>
</div>

<blockquote>
  <p>我们能够使用<code class="highlighter-rouge">reduce</code>来表示所有这些函数, 这个事实说明了<code class="highlighter-rouge">reduce</code>能够通过通用的方法来体现一个相当常见的编程模式: 遍历数组并计算结果.</p>
</blockquote>

<hr />

<blockquote>
  <p>请务必注意: 尽管通过<code class="highlighter-rouge">reduce</code>来定义一切是个很有趣的练习, 但是在实践中者往往不是一个什么好主意. 原因在于, 不出意外的话你的代码最终会在运行期间大量复制生成的数组, 换句话说, 它不得不反复分配内存, 释放内存, 以及复制大量内存中的内容.</p>
</blockquote>


    <div class="declare">
        <div>

        </div>
    </div>
</article>
<!-- end #post__content -->

<div id="post__share">
  <a id="icon-twitter" class="fontello" href="https://twitter.com/intent/tweet?url=http://localhost:4000/2017/02/14/%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0-swift%E4%B8%AD%E7%9A%84Filter-%E5%92%8C-Reduce.html&text=高阶函数---swift中的Filter 和 Reduce" target="_blank"></a>
  <a id="icon-cc" class="fontello" href="https://github.com/YQqiang" target="_blank"></a>
  <a id="icon-weibo" class="fontello" href="http://v.t.sina.com.cn/share/share.php?url=http://localhost:4000/2017/02/14/%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0-swift%E4%B8%AD%E7%9A%84Filter-%E5%92%8C-Reduce.html&title=高阶函数---swift中的Filter 和 Reduce" target="_blank"></a>
    <!-- <div class="share-info">分享一下~</div> -->
</div>
<div id="qrcode" >
	<img src="http://localhost:4000/assets/images/qrcode.jpg" style="margin: 0 auto;display: block;" width="200" height="200" alt="">
</div>
<!-- end #post__share -->
<div id="disqus_thread" name="余强">
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink" target="_blank">Loading Disqus comments...</a>
</div>


            <!---->
    <!--<p id="copyright">Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>-->
    <!--&nbsp;&nbsp;|&nbsp;&nbsp;Theme <a href="https://github.com/P233/3-Jekyll" target="_blank">3-Jekyll</a>-->
    <!--&nbsp;&nbsp;|&nbsp;&nbsp;Hosted on <a href="https://pages.github.com" target="_blank">Github</a></p>-->
      </div> <!-- end #pjax -->

      <div id="post__toc-trigger">
        <div id="post__toc">
          <span id="post__toc-title">Table of Contents</span>
          <ul id="post__toc-ul"></ul>
        </div>
      </div>
    </div> <!-- end #post -->

    <button id="js-fullscreen"><span id="icon-arrow" class="fontello"></span></button>

<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.pjax.js"></script>
<script src="/assets/js/nprogress.js"></script>
<script src="/assets/js/searchbox.js"></script>
<script src="/assets/js/script.js"></script>


    <script>
    //百度站点统计,排除localhost
    if(window.location.host.indexOf("localhost") ==-1 &&  window.location.host.indexOf("127.0.0.1") == -1){

        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?22d94317cfb9f9e0bb476228d9f79278";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    }
</script>
   </body>
 </html>